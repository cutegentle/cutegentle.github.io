

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/icon2.png">
  <link rel="icon" href="/img/icon2.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="此篇介绍Git处理一些提交错误的大全。涉及revert，reset，rebase等。">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  <meta name="description" content="此篇介绍Git处理一些提交错误的大全。涉及revert，reset，rebase等。">
<meta property="og:type" content="article">
<meta property="og:title" content="Git Handling errors">
<meta property="og:url" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="此篇介绍Git处理一些提交错误的大全。涉及revert，reset，rebase等。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224113247359.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224113824864.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224114324829.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224114622201.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224115125866.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224141451928.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224144100865.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224144237652.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224144837828.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224145457271.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224164610330.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224164721329.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224164909384.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224153204349.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224163311475.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224163336189.png">
<meta property="og:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224171645640.png">
<meta property="article:published_time" content="2020-10-07T07:13:01.000Z">
<meta property="article:modified_time" content="2022-02-24T09:27:14.957Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Git">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224113247359.png">
  
  <title>Git Handling errors - Hexo</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname"}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>cutegentle</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Git Handling errors">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-10-07 15:13" pubdate>
        2020年10月7日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      11k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      36 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Git Handling errors</h1>
            
            <div class="markdown-body">
              <p>此篇介绍Git处理一些提交错误的大全。涉及revert，reset，rebase等。</p>
<span id="more"></span>

<h2 id="Start"><a href="#Start" class="headerlink" title="Start"></a>Start</h2><h3 id="修改非最新commit"><a href="#修改非最新commit" class="headerlink" title="修改非最新commit"></a>修改非最新commit</h3><h4 id="演示示例"><a href="#演示示例" class="headerlink" title="演示示例"></a>演示示例</h4><p>实际上有了交互式rebase，随便哪一个commit出错了都可以直接修改，只要在本地。</p>
<p><code>commit --amend</code> 可以修复最新 <code>commit</code> 的错误，但如果是倒数第二个 <code>commit</code> 写错了，怎么办？</p>
<p>在``git-exercise : sami`分支上进行操作。这条分支还是很干净的。提交三次作为实验。</p>
<img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224113247359.png" srcset="/img/loading.gif" lazyload alt="1" style="zoom:67%;">

<p>rebase回退两个。定位到1实际上。</p>
<img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224113824864.png" srcset="/img/loading.gif" lazyload alt="2" style="zoom:67%;">

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  git-exercise git:(sami) git rebase -i HEAD^^<br>Stopped at 229cf94...  rebase i 22<br>You can amend the commit now, with<br><br>  git commit --amend <br><br>Once you are satisfied with your changes, run<br><br>  git rebase --<span class="hljs-built_in">continue</span><br>➜  git-exercise git:(229cf94) <br></code></pre></td></tr></table></figure>

<p>可以看出停在了22这一次提交，就可以在22基础上就行改正。方式就是当作最新的一次commit就行修改即可。</p>
<img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224114324829.png" srcset="/img/loading.gif" lazyload alt="3" style="zoom:50%;">

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  git-exercise git:(229cf94) git add .<br>➜  git-exercise git:(229cf94) ✗ git commit --amend<br>[detached HEAD 8fec5f4] rebase i 22 修改了一下，并直接使用add .<br> 1 file changed, 2 insertions(+)<br>➜  git-exercise git:(8fec5f4) <br></code></pre></td></tr></table></figure>

<img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224114622201.png" srcset="/img/loading.gif" lazyload alt="4" style="zoom:67%;">

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  git-exercise git:(8fec5f4) git rebase --<span class="hljs-built_in">continue</span><br>Auto-merging sami1.txt<br>CONFLICT (content): Merge conflict <span class="hljs-keyword">in</span> sami1.txt<br>error: could not apply 45d3a51... rebase i 333<br>Resolve all conflicts manually, mark them as resolved with<br><span class="hljs-string">&quot;git add/rm &lt;conflicted_files&gt;&quot;</span>, <span class="hljs-keyword">then</span> run <span class="hljs-string">&quot;git rebase --continue&quot;</span>.<br>You can instead skip this commit: run <span class="hljs-string">&quot;git rebase --skip&quot;</span>.<br>To abort and get back to the state before <span class="hljs-string">&quot;git rebase&quot;</span>, run <span class="hljs-string">&quot;git rebase --abort&quot;</span>.<br>Could not apply 45d3a51... rebase i 333<br><span class="hljs-comment"># 解决文件冲突</span><br>➜  git-exercise git:(8fec5f4) ✗ git add sami1.txt <br>➜  git-exercise git:(8fec5f4) ✗ git rebase --<span class="hljs-built_in">continue</span><br>[detached HEAD d480273] rebase i 333<br> 1 file changed, 2 insertions(+)<br>Successfully rebased and updated refs/heads/sami.<br><br></code></pre></td></tr></table></figure>

<img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224115125866.png" srcset="/img/loading.gif" lazyload alt="5" style="zoom:67%;">



<h4 id="交互式rebase"><a href="#交互式rebase" class="headerlink" title="交互式rebase"></a>交互式rebase</h4><p>交互式 <code>rebase</code>，它可以在 <code>rebase</code> 开始之前指定一些额外操作。交互式 <code>rebase</code> 最常用的场景是修改写错的 <code>commit</code>，但也可以用作其他用途。它的大致用法：</p>
<ol>
<li>使用方式是 <code>git rebase -i 目标commit</code>；</li>
<li>在编辑界面中指定需要操作的 <code>commit</code>s 以及操作类型；</li>
<li>操作完成之后用 <code>git rebase --continue</code> 来继续 <code>rebase</code> 过程。</li>
</ol>
<p>如果不是最新的 <code>commit</code> 写错，就不能用 <code>commit --amend</code> 来修复了，而是要用 <code>rebase</code>。不过需要给 <code>rebase</code> 也加一个参数：<code>-i</code>。</p>
<p><code>rebase -i</code> 是 <code>rebase --interactive</code> 的缩写形式，意为「交互式 rebase」。</p>
<p>所谓「交互式 rebase」，就是在 <code>rebase</code> 的操作执行之前，你可以指定要 <code>rebase</code> 的 <code>commit</code> 链中的每一个 <code>commit</code> 是否需要进一步修改。那么你就可以利用这个特点，进行一次「原地 rebase」。</p>
<h4 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">git rebase -i HEAD^^ <span class="hljs-comment"># 定位到HEAD之前2个的commit上</span><br><span class="hljs-comment"># 把当前 commit （ HEAD 所指向的 commit） rebase 到 HEAD 之前 2 个的 commit 上</span><br><span class="hljs-comment">#把要修改的commit 前面的pick 改成edit 然后使用之前那一套</span><br>git add 处理要修改的文件<br>git commit --amend<br>git rebase --<span class="hljs-built_in">continue</span><br></code></pre></td></tr></table></figure>

<p>说明：在 Git 中，有两个「偏移符号」： <code>^</code> 和 <code>~</code>。</p>
<p><code>^</code> 的用法：在 <code>commit</code> 的后面加一个或多个 <code>^</code> 号，可以把 <code>commit</code> 往回偏移，偏移的数量是 <code>^</code> 的数量。例如：<code>master^</code> 表示 <code>master</code> 指向的 <code>commit</code> 之前的那个 <code>commit</code>； <code>HEAD^^</code> 表示 <code>HEAD</code> 所指向的 <code>commit</code> 往前数两个 <code>commit</code>。</p>
<p><code>~</code> 的用法：在 <code>commit</code> 的后面加上 <code>~</code> 号和一个数，可以把 <code>commit</code> 往回偏移，偏移的数量是 <code>~</code> 号后面的数。例如：<code>HEAD~5</code> 表示 <code>HEAD</code> 指向的 <code>commit</code>往前数 5 个 <code>commit</code>。</p>
<h3 id="丢弃最新提交"><a href="#丢弃最新提交" class="headerlink" title="丢弃最新提交"></a>丢弃最新提交</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">git reset --hard HEAD^<br>➜  git-exercise git:(main) git reset --hard HEAD^<br>HEAD is now at 5ce1e26 rebase分支提交<br></code></pre></td></tr></table></figure>

<p><img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224141451928.png" srcset="/img/loading.gif" lazyload alt="6"></p>
<h3 id="丢弃非最新提交"><a href="#丢弃非最新提交" class="headerlink" title="丢弃非最新提交"></a>丢弃非最新提交</h3><p>不是最新的提交，就不能用 <code>reset --hard</code> 来撤销了。这种情况的撤销，就要用之前介绍过的一个指令：交互式 <code>rebase</code> ——<code>rebase -i</code>。</p>
<p>「撤销过往的提交」。方法有两种：</p>
<ol>
<li>用 <code>git rebase -i</code> 在编辑界面中删除想撤销的 <code>commit</code>s</li>
<li>用 <code>git rebase --onto</code> 在 rebase 命令中直接剔除想撤销的 <code>commit</code>s</li>
</ol>
<p>方法有两种，理念是一样的：在 <code>rebase</code> 的过程中去掉想撤销的 <code>commit</code>，让他它消失在历史中。</p>
<h4 id="演示示例丢弃rebase-1"><a href="#演示示例丢弃rebase-1" class="headerlink" title="演示示例丢弃rebase 1"></a>演示示例丢弃rebase 1</h4><img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224144100865.png" srcset="/img/loading.gif" lazyload alt="7" style="zoom:67%;">

<p>把第一条删除</p>
<img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224144237652.png" srcset="/img/loading.gif" lazyload alt="8" style="zoom:67%;">

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  git-exercise git:(sami) git rebase -i sami~3<br>Auto-merging sami1.txt<br>CONFLICT (content): Merge conflict <span class="hljs-keyword">in</span> sami1.txt<br>error: could not apply 8fec5f4... rebase i 22 修改了一下，并直接使用add .<br>Resolve all conflicts manually, mark them as resolved with<br><span class="hljs-string">&quot;git add/rm &lt;conflicted_files&gt;&quot;</span>, <span class="hljs-keyword">then</span> run <span class="hljs-string">&quot;git rebase --continue&quot;</span>.<br>You can instead skip this commit: run <span class="hljs-string">&quot;git rebase --skip&quot;</span>.<br>To abort and get back to the state before <span class="hljs-string">&quot;git rebase&quot;</span>, run <span class="hljs-string">&quot;git rebase --abort&quot;</span>.<br>Could not apply 8fec5f4... rebase i 22 修改了一下，并直接使用add .<br>➜  git-exercise git:(4b3689d) ✗ git add .<br>➜  git-exercise git:(4b3689d) ✗ git rebase --<span class="hljs-built_in">continue</span><br>[detached HEAD f15d6cf] rebase i 22 修改了一下，并直接使用add .<br> 1 file changed, 3 insertions(+)<br>Successfully rebased and updated refs/heads/sami.<br></code></pre></td></tr></table></figure>

<p>从sami最新rebase到之前3个commits，HEAD到了4b3689，产生冲突。</p>
<p><img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224144837828.png" srcset="/img/loading.gif" lazyload alt="9"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html">Sami de branch<br>xiugai<br>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<br>=======<br>Rebase交互式修改不是最新的commits 1<br>Rebase交互式修改不是最新的commits 22 修改倒数第二个22222<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; 8fec5f4 (rebase i 22 修改了一下，并直接使用add .)<br></code></pre></td></tr></table></figure>

<p><img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224145457271.png" srcset="/img/loading.gif" lazyload alt="10"></p>
<h4 id="演示合并无效提交"><a href="#演示合并无效提交" class="headerlink" title="演示合并无效提交"></a>演示合并无效提交</h4><p><img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224164610330.png" srcset="/img/loading.gif" lazyload alt="15"></p>
<img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224164721329.png" srcset="/img/loading.gif" lazyload alt="16" style="zoom:67%;">

<p><img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224164909384.png" srcset="/img/loading.gif" lazyload alt="17"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  git-exercise-b git:(sami) git <span class="hljs-built_in">log</span>       <span class="hljs-comment"># 找到要rebase的位置</span><br>➜  git-exercise-b git:(sami) git rebase -i 4b36<br>[detached HEAD 66d9175] yaosuo一次就够<br> 1 file changed, 5 insertions(+)<br> create mode 100644 sami-yasuo.txt<br>Successfully rebased and updated refs/heads/sami.<br></code></pre></td></tr></table></figure>



<h3 id="错误commit已经push"><a href="#错误commit已经push" class="headerlink" title="错误commit已经push"></a>错误commit已经push</h3><p>讲当错误的 <code>commit</code> 已经被 <code>push</code> 上去时的解决方案。具体的方案有两类：</p>
<ol>
<li>如果出错内容在私有 <code>branch</code>：在本地把内容修正后，强制 <code>push</code> (<code>push -f</code>）一次就可以解决；</li>
<li>如果出错内容在 <code>master</code>：不要强制 <code>push</code>，而要用 <code>revert</code> 把写错的 <code>commit</code> 撤销。</li>
</ol>
<p><img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224153204349.png" srcset="/img/loading.gif" lazyload alt="11"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  git-exercise git:(main) git revert HEAD~1<br>CONFLICT (modify/delete): revert.txt deleted <span class="hljs-keyword">in</span> parent of 534e060 (test-revert) and modified <span class="hljs-keyword">in</span> HEAD. Version HEAD of revert.txt left <span class="hljs-keyword">in</span> tree.<br>error: could not revert 534e060... test-revert<br>hint: after resolving the conflicts, mark the corrected paths<br>hint: with <span class="hljs-string">&#x27;git add &lt;paths&gt;&#x27;</span> or <span class="hljs-string">&#x27;git rm &lt;paths&gt;&#x27;</span><br>hint: and commit the result with <span class="hljs-string">&#x27;git commit&#x27;</span><br>➜  git-exercise git:(main) ✗ git revert HEAD<br>error: Reverting is not possible because you have unmerged files.<br>hint: Fix them up <span class="hljs-keyword">in</span> the work tree, and <span class="hljs-keyword">then</span> use <span class="hljs-string">&#x27;git add/rm &lt;file&gt;&#x27;</span><br>hint: as appropriate to mark resolution and make a commit.<br>fatal: revert failed<br>➜  git-exercise git:(main) ✗ git status<br>On branch main<br>Your branch is ahead of <span class="hljs-string">&#x27;origin/main&#x27;</span> by 6 commits.<br>  (use <span class="hljs-string">&quot;git push&quot;</span> to publish your <span class="hljs-built_in">local</span> commits)<br><br>You are currently reverting commit 534e060.<br>  (fix conflicts and run <span class="hljs-string">&quot;git revert --continue&quot;</span>)<br>  (use <span class="hljs-string">&quot;git revert --skip&quot;</span> to skip this patch)<br>  (use <span class="hljs-string">&quot;git revert --abort&quot;</span> to cancel the revert operation)<br><br>Unmerged paths:<br>  (use <span class="hljs-string">&quot;git restore --staged &lt;file&gt;...&quot;</span> to unstage)<br>  (use <span class="hljs-string">&quot;git add/rm &lt;file&gt;...&quot;</span> as appropriate to mark resolution)<br>	deleted by them: revert.txt<br><br>no changes added to commit (use <span class="hljs-string">&quot;git add&quot;</span> and/or <span class="hljs-string">&quot;git commit -a&quot;</span>)<br>➜  git-exercise git:(main) ✗ git add .<br>➜  git-exercise git:(main) git status<br>On branch main<br>Your branch is ahead of <span class="hljs-string">&#x27;origin/main&#x27;</span> by 6 commits.<br>  (use <span class="hljs-string">&quot;git push&quot;</span> to publish your <span class="hljs-built_in">local</span> commits)<br><br>You are currently reverting commit 534e060.<br>  (all conflicts fixed: run <span class="hljs-string">&quot;git revert --continue&quot;</span>)<br>  (use <span class="hljs-string">&quot;git revert --skip&quot;</span> to skip this patch)<br>  (use <span class="hljs-string">&quot;git revert --abort&quot;</span> to cancel the revert operation)<br><br>nothing to commit, working tree clean<br>➜  git-exercise git:(main) git revert --<span class="hljs-built_in">continue</span><br>On branch main<br>Your branch is ahead of <span class="hljs-string">&#x27;origin/main&#x27;</span> by 6 commits.<br>  (use <span class="hljs-string">&quot;git push&quot;</span> to publish your <span class="hljs-built_in">local</span> commits)<br><br>You are currently reverting commit 534e060.<br>  (all conflicts fixed: run <span class="hljs-string">&quot;git revert --continue&quot;</span>)<br>  (use <span class="hljs-string">&quot;git revert --skip&quot;</span> to skip this patch)<br>  (use <span class="hljs-string">&quot;git revert --abort&quot;</span> to cancel the revert operation)<br><br>nothing to commit, working tree clean<br>➜  git-exercise git:(main) git revert --abort<br>➜  git-exercise git:(main) git revert HEAD<br>[main 6db3b2e] Revert <span class="hljs-string">&quot;test-revert-1&quot;</span><br> 1 file changed, 1 deletion(-)<br></code></pre></td></tr></table></figure>



<h3 id="reset-的本质——不止可以撤销提交"><a href="#reset-的本质——不止可以撤销提交" class="headerlink" title="reset 的本质——不止可以撤销提交"></a>reset 的本质——不止可以撤销提交</h3><p><code>reset</code> 指令的本质：重置 <code>HEAD</code> 以及它所指向的 <code>branch</code> 的位置。同时，介绍了 <code>reset</code> 的三种参数：</p>
<ol>
<li><code>--hard</code>：重置位置的同时，清空工作目录的所有改动；</li>
<li><code>--soft</code>：重置位置的同时，保留工作目录和暂存区的内容，并把重置 <code>HEAD</code> 的位置所导致的新的文件差异放进暂存区。</li>
<li><code>--mixed</code>（默认）：重置位置的同时，保留工作目录的内容，并清空暂存区。</li>
</ol>
<p><code>reset --hard</code> 不仅可以撤销提交，还可以用来把 <code>HEAD</code> 和 <code>branch</code> 移动到其他的任何地方。</p>
<p><code>reset</code> 指令可以重置 <code>HEAD</code> 和 <code>branch</code> 的位置，不过在重置它们的同时，对工作目录可以选择不同的操作，而对工作目录的操作的不同，就是通过 <code>reset</code> 后面跟的参数来确定的。</p>
<h4 id="reset–hard"><a href="#reset–hard" class="headerlink" title="reset–hard"></a>reset–hard</h4><p><code>reset --hard</code> 会在重置 <code>HEAD</code> 和 <code>branch</code> 的同时，重置工作目录里的内容。当你在 <code>reset</code> 后面加了 <code>--hard</code> 参数时，你的工作目录里的内容会被完全重置为和 <code>HEAD</code> 的新位置相同的内容。换句话说，就是你的未提交的修改会被全部擦掉。</p>
<p>你的 <code>HEAD</code> 和当前 <code>branch</code> 切到上一条 <code>commit</code> 的同时，你工作目录里的新改动也一起全都消失了，不管它们是否被放进暂存区</p>
<h4 id="reset–soft"><a href="#reset–soft" class="headerlink" title="reset–soft"></a>reset–soft</h4><p><code>reset --soft</code> 会在重置 <code>HEAD</code> 和 <code>branch</code> 时，保留工作目录和暂存区中的内容，并把重置 <code>HEAD</code> 所带来的新的差异放进暂存区。<code>--hard</code> 会清空工作目录的改动，而 <code>--soft</code> 则会保留工作目录的内容，并把因为保留工作目录内容所带来的新的文件差异放进暂存区。还没有放入暂存区的文件仍然存在，实际上所有的工作目录文件都在。</p>
<h4 id="reset不加参数"><a href="#reset不加参数" class="headerlink" title="reset不加参数"></a>reset不加参数</h4><p><code>reset</code> 如果不加参数，那么默认使用 <code>--mixed</code> 参数。它的行为是：保留工作目录，并且清空暂存区。由 <code>reset</code> 所导致的新提交的文件，直接变成未追踪文件。原来工作区的暂存没有暂存的都变成未暂存。</p>
<h3 id="Git-stash"><a href="#Git-stash" class="headerlink" title="Git stash"></a>Git stash</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  git-exercise git:(main) git add gitstash.txt <br>➜  git-exercise git:(main) ✗ git status<br>On branch main<br>Your branch is ahead of <span class="hljs-string">&#x27;origin/main&#x27;</span> by 7 commits.<br>  (use <span class="hljs-string">&quot;git push&quot;</span> to publish your <span class="hljs-built_in">local</span> commits)<br><br>Changes to be committed:<br>  (use <span class="hljs-string">&quot;git restore --staged &lt;file&gt;...&quot;</span> to unstage)<br>	new file:   gitstash.txt<br><br>Untracked files:<br>  (use <span class="hljs-string">&quot;git add &lt;file&gt;...&quot;</span> to include <span class="hljs-keyword">in</span> what will be committed)<br>	gitstas1.txt<br><br>➜  git-exercise git:(main) ✗ git stash<br>Saved working directory and index state WIP on main: 6db3b2e Revert <span class="hljs-string">&quot;test-revert-1&quot;</span><br>➜  git-exercise git:(main) ✗ git checkout sami<br>Switched to branch <span class="hljs-string">&#x27;sami&#x27;</span><br>➜  git-exercise git:(sami) ✗ git status<br>On branch sami<br>Untracked files:<br>  (use <span class="hljs-string">&quot;git add &lt;file&gt;...&quot;</span> to include <span class="hljs-keyword">in</span> what will be committed)<br>	gitstas1.txt<br><br>nothing added to commit but untracked files present (use <span class="hljs-string">&quot;git add&quot;</span> to track)<br>➜  git-exercise git:(sami) ✗ git checkout main<br>Switched to branch <span class="hljs-string">&#x27;main&#x27;</span><br>Your branch is ahead of <span class="hljs-string">&#x27;origin/main&#x27;</span> by 7 commits.<br>  (use <span class="hljs-string">&quot;git push&quot;</span> to publish your <span class="hljs-built_in">local</span> commits)<br>➜  git-exercise git:(main) ✗ git status<br>On branch main<br>Your branch is ahead of <span class="hljs-string">&#x27;origin/main&#x27;</span> by 7 commits.<br>  (use <span class="hljs-string">&quot;git push&quot;</span> to publish your <span class="hljs-built_in">local</span> commits)<br><br>Untracked files:<br>  (use <span class="hljs-string">&quot;git add &lt;file&gt;...&quot;</span> to include <span class="hljs-keyword">in</span> what will be committed)<br>	gitstas1.txt<br><br>nothing added to commit but untracked files present (use <span class="hljs-string">&quot;git add&quot;</span> to track)<br>➜  git-exercise git:(main) ✗ git stash pop<br>On branch main<br>Your branch is ahead of <span class="hljs-string">&#x27;origin/main&#x27;</span> by 7 commits.<br>  (use <span class="hljs-string">&quot;git push&quot;</span> to publish your <span class="hljs-built_in">local</span> commits)<br><br>Changes to be committed:<br>  (use <span class="hljs-string">&quot;git restore --staged &lt;file&gt;...&quot;</span> to unstage)<br>	new file:   gitstash.txt<br><br>Untracked files:<br>  (use <span class="hljs-string">&quot;git add &lt;file&gt;...&quot;</span> to include <span class="hljs-keyword">in</span> what will be committed)<br>	gitstas1.txt<br><br>Dropped refs/stash@&#123;0&#125; (1b5ba513b08ccf60326d068ae516cb35dc87c254)<br><br></code></pre></td></tr></table></figure>

<p>目前尚未暂存的也不会丢失。但为了保险起见：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">git stash -u <span class="hljs-comment">#include 没有被 track 的文件</span><br>git checkout other<br><span class="hljs-comment"># after operate</span><br>git checkout old<br>git stash pop<br><span class="hljs-comment">#查看list</span><br>git stash list<br>-------------------<br>git stash //把本地的改动暂存起来<br>git stash save <span class="hljs-string">&quot;message&quot;</span> 执行存储时，添加备注，方便查找。<br>git stash pop // 应用最近一次暂存的修改，并删除暂存的记录<br>git stash apply  // 应用某个存储,但不会把存储从存储列表中删除，默认使用第一个存储,即 stash@&#123;0&#125;，如果要使用其他个，git stash apply stash@&#123;<span class="hljs-variable">$num</span>&#125; 。<br>git stash list // 查看 stash 有哪些存储<br>git stash clear // 删除所有缓存的 stash<br><br></code></pre></td></tr></table></figure>



<h3 id="找回已经删除的branch"><a href="#找回已经删除的branch" class="headerlink" title="找回已经删除的branch"></a>找回已经删除的branch</h3><p><code>reflog</code> 是 “reference log” 的缩写，使用它可以查看 Git 仓库中的引用的移动记录。如果不指定引用，它会显示 <code>HEAD</code> 的移动记录。假如你误删了 <code>branch1</code> 这个 <code>branch</code>，那么你可以查看一下 <code>HEAD</code> 的移动历史：</p>
<h3 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h3><p><img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224163311475.png" srcset="/img/loading.gif" lazyload alt="12"></p>
<img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224163336189.png" srcset="/img/loading.gif" lazyload alt="14" style="zoom:67%;">





<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  git-exercise-b git:(main) git fetch<br>➜  git-exercise-b git:(main) git fetch origin main<br>From github.com:cutegentle/git-exercise<br> * branch            main       -&gt; FETCH_HEAD<br>➜  git-exercise-b git:(main) git pull<br>Updating 942f1d3..877ca87<br>Fast-forward<br> branch-a-1.txt | 3 +++<br> 1 file changed, 3 insertions(+)<br> create mode 100644 branch-a-1.txt<br>➜  git-exercise-b git:(main) git status<br>On branch main<br>Your branch is up to date with <span class="hljs-string">&#x27;origin/main&#x27;</span>.<br><br>nothing to commit, working tree clean<br></code></pre></td></tr></table></figure>



<h3 id="回滚总结"><a href="#回滚总结" class="headerlink" title="回滚总结"></a>回滚总结</h3><h4 id="主流：checkout"><a href="#主流：checkout" class="headerlink" title="主流：checkout"></a>主流：checkout</h4><p>在sami分支，chekout回退至sami分支第一次提交进行一些debug。</p>
<p><img src="/2020/10/07/git%E5%A4%84%E7%90%86%E6%8F%90%E4%BA%A4%E9%94%99%E8%AF%AF%E5%A4%A7%E5%85%A8/image-20220224171645640.png" srcset="/img/loading.gif" lazyload alt="16"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs bash">➜  git-exercise-b git:(sami) git checkout 08c7<br><span class="hljs-comment"># 会提示你head进入游离状态，也就是仅仅指向commit。</span><br><span class="hljs-comment"># 不必理会，可以发现文件已经退回到当时状态，可以随便操作</span><br><span class="hljs-comment"># 操作完直接切回原来分支就可以</span><br>Note: switching to <span class="hljs-string">&#x27;08c7&#x27;</span>.<br><br>You are <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;detached HEAD&#x27;</span> state. You can look around, make experimental<br>changes and commit them, and you can discard any commits you make <span class="hljs-keyword">in</span> this<br>state without impacting any branches by switching back to a branch.<br><br>If you want to create a new branch to retain commits you create, you may<br><span class="hljs-keyword">do</span> so (now or later) by using -c with the switch <span class="hljs-built_in">command</span>. Example:<br><br>  git switch -c &lt;new-branch-name&gt;<br><br>Or undo this operation with:<br><br>  git switch -<br><br>Turn off this advice by setting config variable advice.detachedHead to <span class="hljs-literal">false</span><br><br>HEAD is now at 08c7221 sami分支第一次提交<br>➜  git-exercise-b git:(08c7221) git add .<br>➜  git-exercise-b git:(08c7221) ✗ git commit -m <span class="hljs-string">&quot;回退08c7进行一些更改&quot;</span><br>[detached HEAD 0cd559b] 回退08c7进行一些更改<br> 1 file changed, 1 insertion(+)<br>➜  git-exercise-b git:(0cd559b) git <span class="hljs-built_in">log</span><br>➜  git-exercise-b git:(0cd559b) git checkout sami<br>Warning: you are leaving 1 commit behind, not connected to<br>any of your branches:<br><br>  0cd559b 回退08c7进行一些更改<br><br>If you want to keep it by creating a new branch, this may be a good time<br>to <span class="hljs-keyword">do</span> so with:<br><br> git branch &lt;new-branch-name&gt; 0cd559b<br><br>Switched to branch <span class="hljs-string">&#x27;sami&#x27;</span><br><span class="hljs-comment"># 不加下面这句就不会产生新分支，权当测试了，毫无影响。</span><br><span class="hljs-comment"># 如果觉得在上面修改的一些东西是有效的，那么就可以用如下命令，新起一条分支，到时候可以合并进去</span><br>➜  git-exercise-b git:(sami) git branch testcheckoutrollback 0cd559b<br></code></pre></td></tr></table></figure>



<h4 id="reset"><a href="#reset" class="headerlink" title="reset"></a>reset</h4><ul>
<li><strong>「当你用 reset 回滚到了某个版本后，那么在下一次 git 提交时，之前该版本后面的版本会被作为垃圾删掉。」</strong></li>
<li><strong>「当我们回退到一个旧版本后，此时再用 git log 查看提交记录，会发现之前的新版本记录没有了。如果第二天，你又想恢复到新版本怎么办？找不到新版本的 commit_id 怎么办？」</strong></li>
</ul>
<p><strong>「我们可以用 <code>git reflog</code> 查看历史命令，这样就可以看到之前新版本的 commit_id ，然后 <code>git reset --hard commit_id</code> 就可以回到之前的新版本代码」</strong></p>
<ul>
<li>虽然可以用 git reflog 查看本地历史，然后回复到之前的新版本代码，但是在别的电脑上是无法获取你的历史命令的，所以这种方法不安全。万一你的电脑突然坏了，这时候就无法回到未来的版本。</li>
</ul>
<p>这种方式回退是比较粗暴的，可能会丢失信息。</p>
<h4 id="revert"><a href="#revert" class="headerlink" title="revert"></a>revert</h4><p><strong>「千万不要用 <code>git reset</code> 回退已经被推送到公共仓库上的 提交，它只适用于回退本地修改（从未提交到公共仓库中）。如果你需要修复一个公共提交，最好使用 git revert」</strong>。revert适合发现bug在一个commits中。</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/git/">git</a>
                    
                  </div>
                
				
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Git/">Git</a>
                    
                  </div>
                
              </div>
			  
				<! -- 添加捐赠图标 -->
<div class ="post-donate">
    <div id="donate_board" class="donate_bar center">
        <span class="donate_txt">
		   求求给点零花钱！
        </span>
		<input type="button" id="btn_donate" style="background-color: red; color: white; border: none; height=35; width=80" value="打赏"/>
        <br>
      </div>  
	<div id="donate_guide" class="donate_bar center" style="display: none">
		<!-- 支付宝打赏图案 -->
		<img src="/img/ali_pay.png" srcset="/img/loading.gif" lazyload alt="支付宝打赏"> 
		<!-- 微信打赏图案 -->
		<img src="/img/wechat_pay.png" srcset="/img/loading.gif" lazyload alt="微信打赏">  
    </div>
	<script type="text/javascript">
		document.getElementById('btn_donate').onclick = function(){
			var qr=document.getElementById("donate_guide");
			"none"===qr.style.display?qr.style.display="block":qr.style.display="none"
		}
	</script>
</div>
<! -- 添加捐赠图标 -->
				
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/10/11/Git-merge/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Git Merge</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/10/06/git-rebase/">
                        <span class="hidden-mobile">Git rebase</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"AN6bOC92ejHkJUHG5OhVgP47-gzGzoHsz","appKey":"8eRhrIgMOrTiwDg0XdVQVuGV","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"https://an6boc92.lc-cn-n1-shared.com","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          Fluid.plugins.initFancyBox('#valine .vcontent img:not(.vemoji)');
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->



    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
      <div class="col-lg-7 mx-auto nopadding-x-md">
        <div class="container custom mx-auto">
          <link rel="stylesheet" href="/dist/APlayer.min.css"> <div id="aplayer"></div> <script type="text/javascript" src="/dist/APlayer.min.js"></script> <script type="text/javascript" src="/js/music/music.js"></script> 
        </div>
      </div>
    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love" style="color: #ed4b82"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <div style="font-size: 0.85rem"> <span id="timeDate"></span> <script src="/js/duration.js"></script> </div>

  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>














  
<script src="/js/loveheart.js"></script>
<script src="/js/yinghua.js"></script>



<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


<!--浏览器搞笑标题-->
<script type="text/javascript" src="\js\FunnyTitle.js"></script>
</body>
</html>
